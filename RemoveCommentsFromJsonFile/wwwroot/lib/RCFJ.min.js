function GetUIStrings(){$("#ShowErrorMessage").hide();var n=getGetUIStringsParamJsonData(),t={"async":!1,crossDomain:!0,url:uri+"/GetUIStrings",method:"POST",headers:{"content-type":"application/json","cache-control":"no-cache"},data:n,success:function(n,t,i){var u=i.getResponseHeader("content-type")||"",r;if(u.indexOf("json")>=0)if(n.type&&n.type.indexOf("Json")>=0&&n.data&&n.data.length>0){oUIStringDic=null;try{r=JSON.parse(n.data);r&&(oUIStringDic=r)}catch(f){ShowErrorMessage("Data Error!","Bad UI strings JSON Data:"+f)}}else ShowErrorMessage("Data Error!","Unsupported data type:"+n.type)},error:function(n,t){ShowErrorMessage("Server Error!",t)}};$.ajax(t)}function UploadFiles(n){var t,f;$("#ShowErrorMessage").hide();var i=n.currentTarget.files,r=new FormData,u="";for(t=0;t<i.length;t++)r.append(i[t].name,i[t]),u=i[t].name;f={url:uri+"/UploadJsonFile",method:"POST",contentType:!1,processData:!1,cache:!1,data:r,xhr:function(){var n=$("#UploadProgress"),t;return n.css("width","0%"),n.html("0%"),t=$.ajaxSettings.xhr(),t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var i=Math.round(t.loaded/t.total*100);n.css("width",i+"%");n.html(i+"%")}},!1),t},success:function(n,t,i){var f,r;$("#UploadProgressbar").hide();f=i.getResponseHeader("content-type")||"";f.indexOf("json")>=0&&n&&(r=n,n.type?n.type.indexOf("Json")>=0&&SaveTextFile(n.data,u):n!=""&&(oUIStringDic&&(r=oUIStringDic.Constant.UnuploadedFiles+n),alert(r)))},error:function(n,t){$("#UploadProgressbar").hide();ShowErrorMessage("Server Error!",t)}};$("#UploadProgressbar").show();$.ajax(f)}function getGetUIStringsParamJsonData(){var n={Language:strCurrentLanguage};return JSON.stringify(n)}function ResetAllUIString(){oUIStringDic&&$(".needTranslation").each(function(){ResetUIStringOf(this,"")})}function ResetUIStringOf(n,t){var i,r,u;if(n){if(i=t,i=="")i=n.id;else if(n.id.indexOf(i)!=0)return;r=null;oUIStringDic&&(r=oUIStringDic[i]);r&&(u=$(n),$.each(r,function(n,t){n=="html"?u.html(t):n=="options"?u.children("option").each(function(){var n=$(this),i=t[n.val()];i&&n.html(i)}):u.attr(n,t)}))}}function Init(){biOS=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);bMSIE=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g);navigator.language?strCurrentLanguage=navigator.language:navigator.browserLanguage&&(strCurrentLanguage=navigator.browserLanguage)}function ShowErrorMessage(n,t){var i=$("#ShowErrorMessage"),r,u;i&&(n==""&&t==""?i.hide():(r=i.children("h3"),r&&r.html(n),u=i.children("p"),u&&u.html(t),i.show()))}function ShowHideOnProcessing(n){n?$("#OnProcessing").show():$("#OnProcessing").hide()}function SaveTextFile(n,t){if(n&&n!=""){(t==null||t=="")&&(t="TextNoComment.json");var i=[n];i.push();properties={type:"attachment/text;charset=utf-8"};file=new Blob(i,properties);saveAs(file,t)}}var uri="/api/RCFJ",oUIStringDic=null,biOS=!1,strCurrentLanguage="en";$(document).ready(function(){ShowHideOnProcessing(!0);Init();GetUIStrings();ResetAllUIString();ShowHideOnProcessing(!1);$("#UploadProgressbar").hide();$("#UploadFiles").change(function(n){UploadFiles(n)})});